<% if (!is_home() && !is_archive() && !is_year() && !is_month() && !is_category() && !is_tag() && page.path !== 'search/index.html' && page.layout !== 'galleries' && page.layout !== 'gallery' && page.layout !== 'friends') { %>
  <%- partial('../js/toc') %>
  <%- partial('../js/post_lg') %>
  <%- partial('../js/donte_judge') %>

  <% if (page.mathjax === true) { %>
    <!-- MathJax Load-->
    <%- partial('../../widget/mathjax') %>
  <% } %>

  <script>
    /* post appbar */
    (function() {
      var pageFlag = false;
      var appbar = new mdui.Headroom('#blog-appbar');
      appbar.disable();
      $$(window).on('scroll', function() {
        var bodyTop = (document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;
        var pageLocation = $$('div#top').offset().top - bodyTop;
        if (!pageFlag && pageLocation < 0) {
          $$('#blog-appbar .mdui-toolbar').addClass('mdui-shadow-2');
          appbar.enable();
          pageFlag = true;
        } else if (pageFlag && pageLocation >= 0) {
          $$('#blog-appbar .mdui-toolbar').removeClass('mdui-shadow-2');
          appbar.disable();
          pageFlag = false;
        }
      });
    })();
  </script>
<% } %>

<% if (page.total > 1) { %>
  <script type="text/javascript">
    $$(document).on('click', 'a[name="snackbar"]', function () {
      mdui.snackbar({
        message: '<%= __('global.snackbar') %>',
        timeout: 1000
      });
    });
  </script>
<% } %>

<% if (is_archive() && !is_year()) { %>
  <script>
    window.addEventListener("scroll", function(){
       document.querySelector('#archives .bg .mdui-img-fluid.mdui-img-rounded')
        .style.transform = 'translateY(' + document.body.scrollTop * 0.4 + 'px)';
    })
  </script>
<% } %>

<% if (is_home()) { %>
  <%- partial('../js/now/search') %>
<% } %>

<% if (is_category() || is_tag() || is_year()) { %>
  <%- partial('../js/styleChanging') %>
<% } %>

<% if (page.path === 'search/index.html' && theme.appbar.search === true) { %>
  <%- partial('../../widget/js/search/now')%>
<% } %>
