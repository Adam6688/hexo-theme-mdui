<script>
  /* global */
  var appbar = document.querySelector('#blog-appbar');
  var toolbar = document.querySelector('#blog-appbar > .mdui-toolbar');
  var textSpan = document.querySelector('#search-text');
  var textInput = document.querySelector('#search-input');
  var closeBtn = document.querySelector('#close-button');
  var searchCover = document.querySelector('#search-cover');

  /* mobile */
  var drawerBtn = document.querySelector('.drawer-button');
  var siteTitle = document.querySelector('#blog-appbar > .mdui-toolbar > a.mdui-typo-headline');
  var searchBtn = document.querySelector('.search-button');
  var search = document.querySelector('div#search');
  var flexSpacer =  document.querySelector('.flex-spacer.mdui-hidden-sm');

  function openSearch() {
    textSpan.hide();
    textInput.show();
    closeBtn.show();
    textInput.focus();
    searchCover.classList.add('active');
    toolbar.classList.add('mdui-shadow-2');
  }

  function mobileSearch() {
    /* mobile */
    drawerBtn.hide();
    siteTitle.hide();
    searchBtn.hide();
    flexSpacer.hide();
    search.classList.remove('mdui-hidden-xs');
    openSearch();
  }

  function closeSearch() {
    /* global */
    textSpan.show()
    textInput.hide()
    closeBtn.hide()
    searchCover.classList.remove('active');

    var bodyTop = (document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;
    var pageLocation = document.querySelector('div#top').offsetTop - bodyTop;
    if (pageLocation >= 0) {
      toolbar.classList.remove('mdui-shadow-2');
    }

    /* mobile */
    drawerBtn.show();
    siteTitle.show();
    searchBtn.show();
    flexSpacer.show();
    search.classList.add('mdui-hidden-xs');
  }

  Element.prototype.hide = function () {
    this.classList.add('mdui-hidden');
  };
  Element.prototype.show = function () {
    this.classList.remove('mdui-hidden');
  };
</script>
<%- partial('../../../../_widget/js/search/now') %>
