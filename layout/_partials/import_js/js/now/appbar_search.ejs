<script>
  /* global */
  var appbar = document.querySelector('#blog-appbar');
  var toolbar = document.querySelector('#blog-appbar > .mdui-toolbar');
  var textSpan = document.querySelector('#search-text');
  var textInput = document.querySelector('#search-input');
  var closeBtn = document.querySelector('#close-button');
  var searchCover = document.querySelector('#search-cover');

  /* mobile */
  var drawerBtn = document.querySelector('.drawer-button');
  var siteTitle = document.querySelector('#blog-appbar > .mdui-toolbar > a.mdui-typo-headline');
  var searchBtn = document.querySelector('.search-button');
  var search = document.querySelector('div#search');
  var flexSpacer =  document.querySelector('.flex-spacer.mdui-hidden-sm');

  function openSearch() {
    textSpan.classList.add('mdui-hidden');
    textInput.classList.remove('mdui-hidden');
    document.getElementById("search-input").focus();
    searchCover.classList.add('active');
    toolbar.classList.add('mdui-shadow-2');
    closeBtn.classList.remove('mdui-hidden');
  }

  function mobileSearch() {
    /* mobile */
    drawerBtn.classList.add('mdui-hidden');
    siteTitle.classList.add('mdui-hidden');
    searchBtn.classList.add('mdui-hidden');
    flexSpacer.classList.add('mdui-hidden');
    search.classList.remove('mdui-hidden-xs');
    openSearch();
  }

  function closeSearch() {
    /* global */
    textSpan.classList.remove('mdui-hidden');
    textInput.classList.add('mdui-hidden');
    searchCover.classList.remove('active');
    closeBtn.classList.add('mdui-hidden');

    var bodyTop = (document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;
    var pageLocation = document.querySelector('div#top').offsetTop - bodyTop;
    if (pageLocation >= 0) {
      toolbar.classList.remove('mdui-shadow-2');
    }

    /* mobile */
    drawerBtn.classList.remove('mdui-hidden');
    siteTitle.classList.remove('mdui-hidden');
    searchBtn.classList.remove('mdui-hidden');
    search.classList.add('mdui-hidden-xs');
    flexSpacer.classList.remove('mdui-hidden');
  }
</script>
<%- partial('../../../../_widget/js/search/now') %>
