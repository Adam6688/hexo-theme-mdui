<script type="text/ls-javascript" id="style-changing-script">
  var postsCount = document.querySelectorAll('div.posts-container div div.content-item').length || document.querySelectorAll('#content-list div.content-item').length;

  if (postsCount === 1) {
    var postsText = '<%= __('archive.post') %>';
  } else if (postsCount > 1) {
    var postsText = '<%= __('archive.posts') %>';
  };

  document.querySelector('div#postsCount').textContent = postsCount + ' ' + postsText;
  var content_flag = false;
  var appbar = document.querySelector('div#blog-appbar')
  var body = document.querySelector('body')

  window.addEventListener('scroll', function() {
    var scrollTop = (document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;
    var divTop = document.querySelector('div#contentLocation').offsetTop
    var contentLocation = divTop - scrollTop - 56;

    if (!content_flag && contentLocation < 0 && window.innerWidth < 860) {
      appbar.classList.add('style-fix');
      body.classList.remove('style-fix');
      content_flag = true;
    } else if (content_flag && contentLocation >= 0 && window.innerWidth < 860) {
      appbar.classList.remove('style-fix');
      body.classList.add('style-fix');
      content_flag = false;
    };
  })

  function styleChanging() {
    var hide = new mdui.Headroom('div#blog-appbar');
    var windowWidth = window.innerWidth,
      toLeftWidth = 860;
    if (windowWidth < toLeftWidth) {
      hide.enable();
    } else {
      hide.disable();
    }
  };
  styleChanging();
</script>
