<!-- Import JS -->
<% if(theme.vendors.outdatedbrowser_min_js) { %>
  <%- jsLsload({path:(theme.vendors.outdatedbrowser_min_js),key:'outdatedbrowser_js'}) %>
<% } else { %>
  <%- jsLsload({path:(config.root + 'js/outdatedbrowser.min'),key:'outdatedbrowser_js'}) %>
<% } %>

<% if(theme.vendors.js_min_js) { %>
  <%- jsLsload({path:(theme.vendors.js_min_js),key:'main_js'}) %>
<% } else { %>
    <%- jsLsload({path:(config.root + 'js/js-v20170620.min'),key:'main_js'}) %>
<% } %>

<% if (theme.service_woker === true || theme.service_woker === 'pwa') { %>
  <script>
    if ('serviceWorker' in navigator) {
     navigator.serviceWorker.register('<%= config.root + 'sw.js' %>');
    }
  </script>
<% } %>

<% if (theme.style.scheme === 'now') { %>
  <%- partial('import_js/now') %>
<% } else { %>
  <%- partial('import_js/plus') %>
<% } %>

<% if (page.layout === 'galleries') { %>
  <%- partial('../_widget/js/page_galleries') %>
<% } %>

<% if (page.layout === 'gallery') { %>
  <%- partial('../_widget/js/page_gallery') %>
<% } %>

<% if (theme.busuanzi !== false) { %>
  <script type="text/javascript" src="<%= theme.busuanzi.busuanzi_pure_mini_js %>"></script>
<% } %>

<!-- drawer lock
<script type="text/ls-javascript" id="drawer-lock-script">
  var drawer = document.querySelector('#drawer')
  var html = document.querySelector('html')
  drawer.addEventListener('opened.mdui.drawer', function () {
    if (document.querySelector('body').classList.contains('mdui-locked'))
    html.style.overflow = 'hidden'
  });
  drawer.addEventListener('close.mdui.drawer', function () {
    html.style.overflow = 'auto'
  });
</script>-->

<!-- Custom javascript -->
<%- partial('../_custom/custom_js')%>

<script>
  (function(){
    var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')
    for (var i = 0; i < scriptList.length; ++i) {
      var item = scriptList[i];
      lsloader.runInlineScript(item.id,item.id);
    }
  })()
</script>
